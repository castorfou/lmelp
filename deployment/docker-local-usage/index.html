
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Utilisation Docker en local - Documentation des APIs du repo lmelp</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utilisation-docker-en-local" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Documentation des APIs du repo lmelp" class="md-header__button md-logo" aria-label="Documentation des APIs du repo lmelp" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation des APIs du repo lmelp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Utilisation Docker en local
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Documentation des APIs du repo lmelp" class="md-nav__button md-logo" aria-label="Documentation des APIs du repo lmelp" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Documentation des APIs du repo lmelp
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Modules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Modules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../llm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module llm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../whisper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module whisper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module web
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module rss
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mongo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module mongo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mongo_episode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module mongo_episode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mongo_auteur/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module mongo_auteur
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mongo_livre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module mongo_livre
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Other kind of docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Other kind of docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_doc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    manage doc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_markdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    write markdown
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_vscode_hints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    some vs_code hints
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_google/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    about Google services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    data model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    github
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_uv_devcontainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    uv devcontainer venv
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_import_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    import strategy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../readme_unit_test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    unit tests guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    development workflow (Docker + Portainer)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequis" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìã Pr√©requis
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîß Configuration MongoDB
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîß Configuration MongoDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-du-reseau" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration du r√©seau
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-du-script-de-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        üöÄ Utilisation du script de test
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-du-conteneur" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä Gestion du conteneur
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìä Gestion du conteneur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#voir-les-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Voir les logs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arreter-le-conteneur" class="md-nav__link">
    <span class="md-ellipsis">
      
        Arr√™ter le conteneur
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redemarrer-le-conteneur" class="md-nav__link">
    <span class="md-ellipsis">
      
        Red√©marrer le conteneur
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#voir-le-statut" class="md-nav__link">
    <span class="md-ellipsis">
      
        Voir le statut
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acceder-au-shell-du-conteneur" class="md-nav__link">
    <span class="md-ellipsis">
      
        Acc√©der au shell du conteneur
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acces-a-linterface-web" class="md-nav__link">
    <span class="md-ellipsis">
      
        üåê Acc√®s √† l'interface web
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚öôÔ∏è Configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#depannage" class="md-nav__link">
    <span class="md-ellipsis">
      
        üêõ D√©pannage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üêõ D√©pannage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#erreur-connection-refused-mongodb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Erreur : "Connection refused" (MongoDB)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erreur-port-is-already-allocated" class="md-nav__link">
    <span class="md-ellipsis">
      
        Erreur : "port is already allocated"
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erreur-localeerror-unsupported-locale-setting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Erreur : "locale.Error: unsupported locale setting"
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linterface-web-ne-charge-pas" class="md-nav__link">
    <span class="md-ellipsis">
      
        L'interface web ne charge pas
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-de-developpement" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîÑ Workflow de d√©veloppement
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîÑ Workflow de d√©veloppement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tests-rapides-avec-rebuild" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tests rapides avec rebuild
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes-importantes" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìù Notes importantes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voir-aussi" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîó Voir aussi
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="utilisation-docker-en-local">Utilisation Docker en local<a class="headerlink" href="#utilisation-docker-en-local" title="Permanent link">&para;</a></h1>
<p>Ce guide explique comment utiliser lmelp avec Docker sur votre machine locale (PC Linux/Mac/Windows).</p>
<h2 id="prerequis">üìã Pr√©requis<a class="headerlink" href="#prerequis" title="Permanent link">&para;</a></h2>
<ul>
<li>Docker install√© et fonctionnel</li>
<li>MongoDB install√© et accessible sur votre machine h√¥te</li>
<li>Git configur√© pour acc√©der au d√©p√¥t</li>
</ul>
<h2 id="configuration-mongodb">üîß Configuration MongoDB<a class="headerlink" href="#configuration-mongodb" title="Permanent link">&para;</a></h2>
<h3 id="configuration-du-reseau">Configuration du r√©seau<a class="headerlink" href="#configuration-du-reseau" title="Permanent link">&para;</a></h3>
<p>Pour que le conteneur Docker puisse se connecter √† MongoDB sur votre machine h√¥te, MongoDB doit √™tre configur√© pour accepter les connexions depuis le r√©seau Docker.</p>
<p><strong>1. Identifier l'adresse IP du bridge Docker :</strong></p>
<pre><code class="language-bash">ip addr show docker0 | grep inet
# R√©sultat typique : inet 172.17.0.1/16
</code></pre>
<p><strong>2. Modifier la configuration MongoDB :</strong></p>
<p>√âditez <code>/etc/mongod.conf</code> :</p>
<pre><code class="language-yaml">net:
  port: 27017
  bindIp: 127.0.0.1,172.17.0.1  # Ajouter l'IP du bridge Docker
</code></pre>
<p>Ou pour accepter toutes les connexions (moins s√©curis√©) :</p>
<pre><code class="language-yaml">net:
  port: 27017
  bindIp: 0.0.0.0
</code></pre>
<p><strong>3. Red√©marrer MongoDB :</strong></p>
<pre><code class="language-bash">sudo systemctl restart mongod
</code></pre>
<p><strong>4. V√©rifier que MongoDB √©coute sur la bonne interface :</strong></p>
<pre><code class="language-bash">sudo netstat -tulpn | grep 27017
# Devrait montrer : 0.0.0.0:27017 ou 172.17.0.1:27017
</code></pre>
<h2 id="utilisation-du-script-de-test">üöÄ Utilisation du script de test<a class="headerlink" href="#utilisation-du-script-de-test" title="Permanent link">&para;</a></h2>
<p>Un script est fourni pour faciliter le test local en mode interactif :</p>
<p><strong>Utilisation :</strong></p>
<pre><code class="language-bash">./docker/test-local.sh
</code></pre>
<p><strong>Caract√©ristiques :</strong>
- ‚úÖ Pull automatique des derniers changements
- ‚úÖ Build de l'image Docker
- ‚úÖ Nettoyage des anciens conteneurs (sauf devcontainer)
- ‚úÖ Lancement en mode interactif
- ‚úÖ Logs affich√©s en direct dans le terminal
- ‚ö†Ô∏è Terminal bloqu√© (utiliser Ctrl+C pour arr√™ter)</p>
<p><strong>Utilisation recommand√©e :</strong>
- Pour d√©boguer et voir les logs en temps r√©el
- Pour des tests rapides
- Pour d√©veloppement actif</p>
<h2 id="gestion-du-conteneur">üìä Gestion du conteneur<a class="headerlink" href="#gestion-du-conteneur" title="Permanent link">&para;</a></h2>
<h3 id="voir-les-logs">Voir les logs<a class="headerlink" href="#voir-les-logs" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash"># Logs en temps r√©el
docker logs -f lmelp-local

# Derni√®res 50 lignes
docker logs --tail 50 lmelp-local

# Logs depuis les 10 derni√®res minutes
docker logs --since 10m lmelp-local
</code></pre>
<h3 id="arreter-le-conteneur">Arr√™ter le conteneur<a class="headerlink" href="#arreter-le-conteneur" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash"># Arr√™t propre
docker stop lmelp-local

# Arr√™t forc√© et suppression
docker rm -f lmelp-local
</code></pre>
<h3 id="redemarrer-le-conteneur">Red√©marrer le conteneur<a class="headerlink" href="#redemarrer-le-conteneur" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash">docker restart lmelp-local
</code></pre>
<h3 id="voir-le-statut">Voir le statut<a class="headerlink" href="#voir-le-statut" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash"># Voir tous les conteneurs lmelp
docker ps -a | grep lmelp

# Voir les conteneurs en cours d'ex√©cution
docker ps | grep lmelp
</code></pre>
<h3 id="acceder-au-shell-du-conteneur">Acc√©der au shell du conteneur<a class="headerlink" href="#acceder-au-shell-du-conteneur" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash">docker exec -it lmelp-local bash
</code></pre>
<h2 id="acces-a-linterface-web">üåê Acc√®s √† l'interface web<a class="headerlink" href="#acces-a-linterface-web" title="Permanent link">&para;</a></h2>
<p>Une fois le conteneur lanc√© :</p>
<p><strong>URL :</strong> http://localhost:8501</p>
<p>L'application Streamlit est accessible sur le port 8501 de votre machine h√¥te.</p>
<p><strong>Note :</strong> Le devcontainer utilise aussi le port 8501 (avec <code>network=host</code>). Assurez-vous qu'une seule instance tourne √† la fois.</p>
<h2 id="configuration">‚öôÔ∏è Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<p>Les scripts configurent automatiquement :</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Valeur</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DB_HOST</code></td>
<td><code>172.17.0.1</code></td>
<td>Adresse du bridge Docker pour acc√©der au MongoDB du h√¥te</td>
</tr>
<tr>
<td><code>DB_NAME</code></td>
<td><code>masque_et_la_plume</code></td>
<td>Nom de la base de donn√©es</td>
</tr>
<tr>
<td><code>DB_LOGS</code></td>
<td><code>true</code></td>
<td>Active les logs MongoDB</td>
</tr>
<tr>
<td>Port</td>
<td><code>8501:8501</code></td>
<td>Port de l'interface web</td>
</tr>
</tbody>
</table>
<h2 id="depannage">üêõ D√©pannage<a class="headerlink" href="#depannage" title="Permanent link">&para;</a></h2>
<h3 id="erreur-connection-refused-mongodb">Erreur : "Connection refused" (MongoDB)<a class="headerlink" href="#erreur-connection-refused-mongodb" title="Permanent link">&para;</a></h3>
<p><strong>Sympt√¥me :</strong></p>
<pre><code>ServerSelectionTimeoutError: 172.17.0.1:27017: [Errno 111] Connection refused
</code></pre>
<p><strong>Solutions :</strong></p>
<ol>
<li>
<p><strong>V√©rifier que MongoDB tourne :</strong>
   <code>bash
   sudo systemctl status mongod</code></p>
</li>
<li>
<p><strong>V√©rifier la configuration bindIp :</strong>
   <code>bash
   grep bindIp /etc/mongod.conf
   # Devrait montrer : bindIp: 0.0.0.0 ou bindIp: 127.0.0.1,172.17.0.1</code></p>
</li>
<li>
<p><strong>V√©rifier que MongoDB √©coute sur la bonne interface :</strong>
   <code>bash
   sudo netstat -tulpn | grep 27017</code></p>
</li>
<li>
<p><strong>Red√©marrer MongoDB apr√®s changement de config :</strong>
   <code>bash
   sudo systemctl restart mongod</code></p>
</li>
</ol>
<h3 id="erreur-port-is-already-allocated">Erreur : "port is already allocated"<a class="headerlink" href="#erreur-port-is-already-allocated" title="Permanent link">&para;</a></h3>
<p><strong>Sympt√¥me :</strong></p>
<pre><code>Error: Bind for 0.0.0.0:8501 failed: port is already allocated
</code></pre>
<p><strong>Cause :</strong> Le devcontainer ou une autre instance Streamlit utilise d√©j√† le port 8501.</p>
<p><strong>Solutions :</strong></p>
<ol>
<li><strong>Arr√™ter le devcontainer si il tourne :</strong></li>
<li>Dans VS Code: Fermer la fen√™tre devcontainer</li>
<li>
<p>Ou arr√™ter le conteneur: <code>docker stop vsc-lmelp-...</code></p>
</li>
<li>
<p><strong>V√©rifier les processus utilisant le port :</strong>
   <code>bash
   sudo lsof -i :8501</code></p>
</li>
<li>
<p><strong>Arr√™ter l'ancien conteneur de test si pr√©sent :</strong>
   <code>bash
   docker stop lmelp-local</code></p>
</li>
</ol>
<h3 id="erreur-localeerror-unsupported-locale-setting">Erreur : "locale.Error: unsupported locale setting"<a class="headerlink" href="#erreur-localeerror-unsupported-locale-setting" title="Permanent link">&para;</a></h3>
<p><strong>Sympt√¥me :</strong></p>
<pre><code>locale.Error: unsupported locale setting (fr_FR.UTF-8)
</code></pre>
<p><strong>Solution :</strong>
Ce probl√®me est d√©j√† corrig√© dans le Dockerfile. Si vous le rencontrez :
1. Assurez-vous d'utiliser la derni√®re version de l'image
2. Rebuild l'image : <code>docker build -f docker/Dockerfile -t lmelp:local .</code></p>
<h3 id="linterface-web-ne-charge-pas">L'interface web ne charge pas<a class="headerlink" href="#linterface-web-ne-charge-pas" title="Permanent link">&para;</a></h3>
<p><strong>Solutions :</strong></p>
<ol>
<li>
<p><strong>V√©rifier que le conteneur tourne :</strong>
   <code>bash
   docker ps | grep lmelp-local</code></p>
</li>
<li>
<p><strong>Voir les logs pour erreurs :</strong>
   <code>bash
   docker logs lmelp-local</code></p>
</li>
<li>
<p><strong>V√©rifier le port mapping :</strong>
   <code>bash
   docker port lmelp-local
   # Devrait montrer : 8501/tcp -&gt; 0.0.0.0:8501</code></p>
</li>
</ol>
<h2 id="workflow-de-developpement">üîÑ Workflow de d√©veloppement<a class="headerlink" href="#workflow-de-developpement" title="Permanent link">&para;</a></h2>
<h3 id="tests-rapides-avec-rebuild">Tests rapides avec rebuild<a class="headerlink" href="#tests-rapides-avec-rebuild" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash"># Lancer le script de test (mode interactif)
./docker/test-local.sh

# Ctrl+C pour arr√™ter
# Modifier le code
# Relancer
./docker/test-local.sh
</code></pre>
<h2 id="notes-importantes">üìù Notes importantes<a class="headerlink" href="#notes-importantes" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Pull automatique</strong> : Les scripts font automatiquement un <code>git pull</code> avant le build. Assurez-vous d'avoir commit√© vos changements locaux.</p>
</li>
<li>
<p><strong>Nettoyage</strong> : Les scripts arr√™tent et suppriment automatiquement les anciens conteneurs <code>lmelp</code> avant de lancer le nouveau.</p>
</li>
<li>
<p><strong>Image locale</strong> : Les scripts cr√©ent une image nomm√©e <code>lmelp:local</code> qui reste sur votre machine. Pour la supprimer :
   <code>bash
   docker rmi lmelp:local</code></p>
</li>
<li>
<p><strong>Donn√©es persistantes</strong> : Les conteneurs n'ont pas de volumes mont√©s pour les donn√©es. Les donn√©es sont stock√©es dans MongoDB sur le h√¥te.</p>
</li>
</ol>
<h2 id="voir-aussi">üîó Voir aussi<a class="headerlink" href="#voir-aussi" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../issue-dockerisation/">Configuration Docker compl√®te</a> - Plan de dockerisation complet</li>
<li><a href="../github-actions-setup/">Configuration GitHub Actions</a> - CI/CD et d√©ploiement automatis√©</li>
<li><a href="../../docker/README.md">README Docker</a> - Documentation technique Docker</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>